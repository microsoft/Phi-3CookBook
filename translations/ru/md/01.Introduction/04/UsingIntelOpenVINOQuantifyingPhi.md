# **–ö–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ Phi-3.5 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Intel OpenVINO**

Intel ‚Äî —ç—Ç–æ —Å–∞–º—ã–π —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –° —Ä–æ—Å—Ç–æ–º –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –∏ –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è Intel —Ç–∞–∫–∂–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –≥–æ–Ω–∫–µ –∑–∞ —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º –ò–ò. –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã–≤–æ–¥–∞ –º–æ–¥–µ–ª–µ–π Intel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ GPU –∏ CPU, –Ω–æ –∏ NPU.

–ú—ã —Å—Ç—Ä–µ–º–∏–º—Å—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–µ–º–µ–π—Å—Ç–≤–æ Phi-3.x –Ω–∞ –∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –Ω–∞–¥–µ—è—Å—å —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –≤–∞–∂–Ω–µ–π—à–µ–π —á–∞—Å—Ç—å—é AI PC –∏ Copilot PC. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –Ω–∞ –∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è. –≠—Ç–∞ –≥–ª–∞–≤–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∞ –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Intel OpenVINO –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π.

## **–ß—Ç–æ —Ç–∞–∫–æ–µ OpenVINO**

OpenVINO ‚Äî —ç—Ç–æ –æ—Ç–∫—Ä—ã—Ç—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –æ—Ç –æ–±–ª–∞–∫–∞ –¥–æ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏. –û–Ω —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫ –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ò–ò, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ –∏ —è–∑—ã–∫, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–µ–π –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ PyTorch, TensorFlow, ONNX –∏ –¥—Ä—É–≥–∏—Ö. OpenVINO –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –∏—Ö –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö Intel¬Æ –∏ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö: –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –≤ –æ–±–ª–∞–∫–µ.

–¢–µ–ø–µ—Ä—å —Å –ø–æ–º–æ—â—å—é OpenVINO –≤—ã –º–æ–∂–µ—Ç–µ –±—ã—Å—Ç—Ä–æ –∫–≤–∞–Ω—Ç–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ GenAI –Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏ Intel –∏ —É—Å–∫–æ—Ä—è—Ç—å –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç OpenVINO –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤ –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Phi-3.5-Vision –∏ Phi-3.5 Instruct.

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –≠—Ç–æ —Ñ–∞–π–ª requirement.txt:

```txt

--extra-index-url https://download.pytorch.org/whl/cpu
optimum-intel>=1.18.2
nncf>=2.11.0
openvino>=2024.3.0
transformers>=4.40
openvino-genai>=2024.3.0.0

```

### **–ö–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ Phi-3.5-Instruct —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenVINO**

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç:

```bash


export llm_model_id = "microsoft/Phi-3.5-mini-instruct"

export llm_model_path = "your save quantizing Phi-3.5-instruct location"

optimum-cli export openvino --model {llm_model_id} --task text-generation-with-past --weight-format int4 --group-size 128 --ratio 0.6  --sym  --trust-remote-code {llm_model_path}


```

### **–ö–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ Phi-3.5-Vision —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenVINO**

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≤ Python –∏–ª–∏ Jupyter Lab:

```python

import requests
from pathlib import Path
from ov_phi3_vision import convert_phi3_model
import nncf

if not Path("ov_phi3_vision.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/notebooks/phi-3-vision/ov_phi3_vision.py")
    open("ov_phi3_vision.py", "w").write(r.text)


if not Path("gradio_helper.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/notebooks/phi-3-vision/gradio_helper.py")
    open("gradio_helper.py", "w").write(r.text)

if not Path("notebook_utils.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/utils/notebook_utils.py")
    open("notebook_utils.py", "w").write(r.text)



model_id = "microsoft/Phi-3.5-vision-instruct"
out_dir = Path("../model/phi-3.5-vision-128k-instruct-ov")
compression_configuration = {
    "mode": nncf.CompressWeightsMode.INT4_SYM,
    "group_size": 64,
    "ratio": 0.6,
}
if not out_dir.exists():
    convert_phi3_model(model_id, out_dir, compression_configuration)

```

### **ü§ñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Phi-3.5 —Å Intel OpenVINO**

| –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è    | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Å—ã–ª–∫–∞ |
| -------- | ------- |  ------- |
| üöÄ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è: –í–≤–µ–¥–µ–Ω–∏–µ –≤ Phi-3.5 Instruct  | –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Phi-3.5 Instruct –Ω–∞ –≤–∞—à–µ–º AI PC    |  [–ü–µ—Ä–µ–π—Ç–∏](../../../../../code/09.UpdateSamples/Aug/intel-phi35-instruct-zh.ipynb)    |
| üöÄ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è: –í–≤–µ–¥–µ–Ω–∏–µ –≤ Phi-3.5 Vision (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) | –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Phi-3.5 Vision –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –≤–∞—à–µ–º AI PC      |  [–ü–µ—Ä–µ–π—Ç–∏](../../../../../code/09.UpdateSamples/Aug/intel-phi35-vision-img.ipynb)    |
| üöÄ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è: –í–≤–µ–¥–µ–Ω–∏–µ –≤ Phi-3.5 Vision (–≤–∏–¥–µ–æ)   | –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Phi-3.5 Vision –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–∏–¥–µ–æ –Ω–∞ –≤–∞—à–µ–º AI PC    |  [–ü–µ—Ä–µ–π—Ç–∏](../../../../../code/09.UpdateSamples/Aug/intel-phi35-vision-video.ipynb)    |

## **–†–µ—Å—É—Ä—Å—ã**

1. –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ–± Intel OpenVINO [https://www.intel.com/content/www/us/en/developer/tools/openvino-toolkit/overview.html](https://www.intel.com/content/www/us/en/developer/tools/openvino-toolkit/overview.html)

2. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Intel OpenVINO –Ω–∞ GitHub [https://github.com/openvinotoolkit/openvino.genai](https://github.com/openvinotoolkit/openvino.genai)

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:  
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö AI-—Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞. –•–æ—Ç—è –º—ã —Å—Ç—Ä–µ–º–∏–º—Å—è –∫ —Ç–æ—á–Ω–æ—Å—Ç–∏, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –µ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–º —è–∑—ã–∫–µ —Å–ª–µ–¥—É–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º. –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —á–µ–ª–æ–≤–µ–∫–æ–º. –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.